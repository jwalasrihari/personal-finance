<div class="space-y-8">
    <h2 class="text-2xl font-bold text-gray-900">Reports & Insights</h2>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-16 text-gray-500">
        <svg class="animate-spin h-8 w-8 mx-auto mb-4 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none"
            viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
        </svg>
        Loading reports...
    </div>

    <div *ngIf="!loading" class="space-y-8">
        <!-- Top Row: Health Score + Category Breakdown -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Health Score Card -->
            <div
                class="bg-white shadow-lg rounded-xl p-8 flex flex-col items-center justify-center text-center border border-gray-100">
                <h3 class="text-lg font-semibold text-gray-700 mb-6">Financial Health Score</h3>
                <div class="relative h-40 w-40 flex items-center justify-center rounded-full border-8 transition-colors duration-500"
                    [ngClass]="{
                    'border-green-500': healthScore >= 80,
                    'border-indigo-500': healthScore >= 60 && healthScore < 80,
                    'border-yellow-500': healthScore >= 40 && healthScore < 60,
                    'border-red-500': healthScore < 40
                }">
                    <span class="text-5xl font-bold text-gray-900">{{ healthScore }}</span>
                </div>
                <p class="mt-4 text-sm font-medium" [ngClass]="{
                    'text-green-600': healthScore >= 80,
                    'text-indigo-600': healthScore >= 60 && healthScore < 80,
                    'text-yellow-600': healthScore >= 40 && healthScore < 60,
                    'text-red-600': healthScore < 40
                }">
                    {{ healthScore >= 80 ? 'üéâ Excellent! Keep it up.' :
                    healthScore >= 60 ? 'üëç Good, but room for improvement.' :
                    healthScore >= 40 ? '‚ö†Ô∏è Needs some attention.' :
                    'üö® Your finances need immediate attention.' }}
                </p>
            </div>

            <!-- Category Breakdown (Doughnut) -->
            <div class="bg-white shadow-lg rounded-xl p-6 border border-gray-100">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Spending by Category</h3>
                <div class="relative" style="height: 300px;">
                    <canvas #categoryChart></canvas>
                </div>
            </div>
        </div>

        <!-- Monthly Income vs Expenses (Bar Chart) -->
        <div class="bg-white shadow-lg rounded-xl p-6 border border-gray-100">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Income vs Expenses</h3>
            <div class="relative" style="height: 350px;">
                <canvas #monthlyChart></canvas>
            </div>
        </div>

        <!-- Balance Trend (Line Chart) -->
        <div class="bg-white shadow-lg rounded-xl p-6 border border-gray-100">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Balance Trend</h3>
            <div class="relative" style="height: 300px;">
                <canvas #trendChart></canvas>
            </div>
        </div>

        <!-- Smart Insights -->
        <div class="bg-white shadow-lg rounded-xl p-6 border border-gray-100">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">üí° Smart Insights</h3>
            <ul class="space-y-3">
                <li *ngFor="let insight of insights" class="flex items-start">
                    <svg class="h-6 w-6 text-indigo-500 mr-3 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span class="text-gray-600">{{ insight }}</span>
                </li>
                <li *ngIf="insights.length === 0" class="text-gray-500 italic">
                    No specific insights yet. Add more transactions to get personalized insights!
                </li>
            </ul>
        </div>
    </div>
</div>